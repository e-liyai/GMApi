<!DOCTYPE html>
<html>
<head>
	<title>test</title>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<style type="text/css">
		html { height: 100% }
		body { height: 100%; margin: 0; padding: 0; }
		#map { height: 100% }
	</style>
	<!-- Access GM -->
	<script src="env.js" id="env_script"></script>
	<script>
		function loadGoogleScript(url, callback) {
			let script = document.createElement('script');
			if(script.readyState) {  // only required for IE <9
			    script.onreadystatechange = function() {
			      if ( script.readyState === "loaded" || script.readyState === "complete" ) {
			        script.onreadystatechange = null;
			        callback();
			      }
			    };
			} else {  //Others
			    script.onload = function() {
			      callback();
			    };
			}
			script.src = url;
			const env_script = document.getElementById('env_script');
			env_script.parentNode.insertBefore(script, env_script.nextSibling);
		}

		loadGoogleScript("https://maps.googleapis.com/maps/api/js?key="+env.KEY, function() {
			function initialize() {
				let mapOptions = {
					center: new google.maps.LatLng(52.427548, -3.515625),
					zoom: 11
				};
				let map = new google.maps.Map(document.getElementById("map"), mapOptions);
			}
			google.maps.event.addDomListener(window, "load", initialize);
		});
	</script>
</head>
<body>
	<div id="map"></div>
</body>
</html>